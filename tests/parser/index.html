<html>
  <head>
    <script type="text/javascript" src="/l20n/js/lib/l20n.js"></script>
    <script type="text/javascript" src="/l20n/js/lib/events.js"></script>
    <script type="text/javascript" src="/l20n/js/lib/parser-l10n.js"></script>
    <script type="text/javascript" src="/l20n/js/lib/l10n.js"></script>
    <script type="text/javascript" src="/l20n/js/lib/parser.js"></script>

    <script type="text/javascript">
        function parse() {
          var rep = document.getElementById('runs').value;
          //var rep = 1;

          var lol = document.getElementById('lol').value;
          var errors = [];
          window.parser = new L20n.Parser(L20n.EventEmitter);
          window.parser.addEventListener('error', function(e) {
              errors.push(e);
          });
          var ast;
          var start = new Date();
          for (var i=0;i<rep;i++) {
            errors = [];
            //ast = parseProperties(lol);
            ast = parser.parse(lol, true);
          }
          document.getElementById('num').innerHTML = (new Date() - start);
          document.getElementById('ast').value = JSON.stringify(ast, true, 2);
          document.getElementById('errors').value = errors.join('\n-----------\n');
        }

function reset() {
  document.getElementById('errors').value = '';
}
    </script>
  </head>
  <body onload="reset()">
    <textarea id="lol" style="width:200px;height:200px"></textarea>
    <textarea id="ast" style="width:200px;height:200px"></textarea>
    <hr/>
    <button onclick="parse()">parse</button>
    <label for="runs">Runs:</label>
    <input type="text" id="runs" size=5 value="5000" />
    Time:
    <span id="num">0</span>
    <hr/>
    Errors:
    <textarea id="errors" style="width:200px;height:200px"></textarea>
  </body>
</html>


